<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Bird Clone</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(to bottom, #87CEEB, #B0E0E6);
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        }
        canvas {
            border: 2px solid #fff;
        }
        #gameOverPanel, #mainMenu, #popup, #shopPanel  {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.9);
            border: 2px solid yellow;
            padding: 20px;
            text-align: center;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        h1 {
            font-size: 48px;
            color: white;
            text-shadow: 2px 2px 4px black;
            margin: 0;
        }
        .button {
            margin: 10px;
            padding: 10px 20px;
            background-color: #87CEEB;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 18px;
            color: white;
            text-shadow: 1px 1px 2px black;
            transition: background-color 0.3s;
        }
        .button:hover {
            background-color: #6EC6E3;
        }
        .pause-text {
            font-size: 30px;
            color: red;
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover {
            color: red;
        }
        .button-container {
    display: flex;
    flex-direction: column; /* –†–∞–∑–º–µ—â–∞–µ–º –∫–Ω–æ–ø–∫–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
    align-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
}

.button {
    width: 200px; /* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∂–µ–ª–∞–µ–º—É—é —à–∏—Ä–∏–Ω—É */
    margin: 10px 0; /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
    padding: 10px; /* –ë–æ–ª–µ–µ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
}

.button-container {
    display: flex;
    flex-direction: column; /* –†–∞–∑–º–µ—â–∞–µ–º –∫–Ω–æ–ø–∫–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
    align-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
}



/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∑–Ω–∞—á–∫–∞ */
.restart-button {
    font-size: 20px; /* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∑–Ω–∞—á–∫–∞ */
    background: none; /* –£–±–∏—Ä–∞–µ–º —Ñ–æ–Ω, –µ—Å–ª–∏ —ç—Ç–æ –Ω—É–∂–Ω–æ */
    border: none; /* –£–±–∏—Ä–∞–µ–º —Ä–∞–º–∫—É */
    color: black; /* –¶–≤–µ—Ç –∑–Ω–∞—á–∫–∞ */
    cursor: pointer; /* –£–∫–∞–∑–∞—Ç–µ–ª—å –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    padding: 0; /* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã */
}

/* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ "–ú–∞–≥–∞–∑–∏–Ω" */
#shopBtn {
    background-color: rgb(255, 0, 0); /* –¶–≤–µ—Ç –∫–Ω–æ–ø–∫–∏ */
    border: none;
    border-radius: 10px;
    font-weight: bold;
    display: block; /* –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –±–ª–æ—á–Ω–æ–π, —á—Ç–æ–±—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –µ–µ –ø–æ–¥ –º–µ–Ω—é */
    margin: 20px auto; /* –¶–µ–Ω—Ç—Ä—É–µ–º –∫–Ω–æ–ø–∫—É */
}


/* –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç–∏–ª–∏ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è –¥–ª—è —Ñ–æ–Ω–∞ */
#overlay {
    display: none; /* –°–∫—Ä—ã–≤–∞–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    position: fixed; /* –§–∏–∫—Å–∏—Ä—É–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ */
    z-index: 999; /* –õ–µ–∂–∏—Ç –ø–æ–¥ –æ–∫–Ω–æ–º –º–∞–≥–∞–∑–∏–Ω–∞ */
}

.shop-item {
    border: 2px solid yellow; /* –ñ–µ–ª—Ç–∞—è —Ä–∞–º–∫–∞ */
    background-color: white; /* –ë–µ–ª—ã–π —Ñ–æ–Ω */
    border-radius: 10px; /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
    padding: 5px; /* –û—Ç—Å—Ç—É–ø –≤–Ω—É—Ç—Ä–∏ —è—á–µ–π–∫–∏ */
    text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
    width: 50px; /* –®–∏—Ä–∏–Ω–∞ —è—á–µ–π–∫–∏ */
    height: 60px; /* –í—ã—Å–æ—Ç–∞ —è—á–µ–π–∫–∏ */
    display: flex; /* –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–ª–µ–∫—Å –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è */
    flex-direction: column; /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */
    justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
    align-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
}

.shop-item img {
    width: 90%; /* –®–∏—Ä–∏–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
    height: auto; /* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã—Å–æ—Ç–∞ */
}

.shop-item p {
    font-size: 10px; /* –†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ "–í—ã–±—Ä–∞–Ω–æ" */
    margin: 0; /* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã —É —Ç–µ–∫—Å—Ç–∞ */
}
    </style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="600"></canvas>



<div id="mainMenu">
    <h1>Flappy Bird</h1>
    <div id="coinDisplay" style="color: rgb(0, 0, 0); font-size: 20px; margin-top: 10px; margin-bottom: 10px;">0 üí∞</div>
    <div class="button-container">
        <button id="easyBtn" class="button">–õ–µ–≥–∫–æ</button>
        <button id="mediumBtn" class="button">–°—Ä–µ–¥–Ω–µ</button>
        <button id="hardBtn" class="button">–°–ª–æ–∂–Ω–æ</button>
        <button id="shopBtn" class="button" style="background-color: rgb(255, 0, 0); margin-top: 10px;">–ú–∞–≥–∞–∑–∏–Ω</button> 
        <button id="earnButton" class="button">–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å 100 –º–æ–Ω–µ—Ç</button>
    </div>
</div>

<!-- –û–∫–Ω–æ –º–∞–≥–∞–∑–∏–Ω–∞ -->
<div id="shopPanel" style="display:none;">
    <h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
        <div class="shop-item" data-index="0" data-cost="100">
            <img src="bird0.png" alt="–ü—Ç–∏—á–∫–∞" />
            <p>‚úî</p>
        </div>
        <div class="shop-item" data-index="1" data-cost="100">
            <img src="question.png" alt="?" />
            <p>100 üí∞</p>
        </div>
        <div class="shop-item" data-index="2" data-cost="100">
            <img src="question.png" alt="?" />
            <p>100 üí∞</p>
        </div>
        <div class="shop-item" data-index="3" data-cost="100">
            <img src="question.png" alt="?" />
            <p>100 üí∞</p>
        </div>
        <div class="shop-item" data-index="4" data-cost="100">
            <img src="question.png" alt="?" />
            <p>100 üí∞</p>
        </div>
        <div class="shop-item" data-index="5" data-cost="100">
            <img src="question.png" alt="?" />
            <p>100 üí∞</p>
        </div>
        <div class="shop-item" data-index="6" data-cost="100">
            <img src="question.png" alt="?" />
            <p>100 üí∞</p>
        </div>
        <div class="shop-item" data-index="7" data-cost="100">
            <img src="question.png" alt="?" />
            <p>100 üí∞</p>
        </div>
        <div class="shop-item" data-index="8" data-cost="100">
            <img src="question.png" alt="?" />
            <p>100 üí∞</p>
        </div>
        <div class="shop-item" data-index="9" data-cost="100">
            <img src="question.png" alt="?" />
            <p>100 üí∞</p>
        </div>
        <div class="shop-item" data-index="10" data-cost="100">
            <img src="question.png" alt="?" />
            <p>100 üí∞</p>
        </div>
        <div class="shop-item" data-index="11" data-cost="100">
            <img src="question.png" alt="?" />
            <p>100 üí∞</p>
        </div>
    </div>
    <button id="closeShopBtn" class="button">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<div id="gameOverPanel" style="display:none;">
    <h2>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞</h2>
    <p>–í–∞—à —Å—á–µ—Ç: <span id="scoreDisplay"></span></p>
    <p>–†–µ–∫–æ—Ä–¥: <span id="highScoreDisplay"></span></p>
    <p>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –º–æ–Ω–µ—Ç—ã: <span id="coinsDisplay"></span></p> <!-- –≠—Ç–æ —Å—Ç—Ä–æ–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–Ω–µ—Ç -->
    <div style="display: flex; justify-content: center; gap: 10px;"> <!-- Flexbox –¥–ª—è —Ü–µ–Ω—Ç—Ä–æ–≤–∫–∏ -->
        <button id="restartBtn" class="button" style="width: 120px;">&#8635</button> <!-- –£–∫–∞–∑—ã–≤–∞–µ–º —à–∏—Ä–∏–Ω—É –∫–Ω–æ–ø–∫–∏ -->
        <button id="menuBtn" class="button" style="width: 120px;">–ú–µ–Ω—é</button>
    </div>
</div>

<div class="pause-text" id="pauseText" style="display: none;">–ü–∞—É–∑–∞</div>

<div id="popup" class="popup">
    <div class="popup-content">
        <span class="close" id="closePopup">&times;</span>
        <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–µ</h2>
        <p>–≠—Ç–æ –ø—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è –∏–≥—Ä—ã Flappy Bird.</p>
        <button id="confirm" class="button">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const PIPE_WIDTH = 30; // –®–∏—Ä–∏–Ω–∞ —Ç—Ä—É–±
    const GAP = 150; // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –≤–µ—Ä—Ö–Ω–µ–π –∏ –Ω–∏–∂–Ω–µ–π —Ç—Ä—É–±–æ–π

    const SPEED_EASY = 1;  // –°–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è
    const SPEED_MEDIUM = 2;  // –°–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è
    const SPEED_HARD = 3;  // –°–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è

    let pipeSpeed = SPEED_EASY; // –ù–∞—á–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å

    const GAP_EASY = 250;   // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è
const GAP_MEDIUM = 200; // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è
const GAP_HARD = 200;    // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è

let totalCoins = 0; // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç
let selectedBirdIndex = 0; // –ò–Ω–¥–µ–∫—Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø—Ç–∏—á–∫–∏
const shopItems = document.querySelectorAll('.shop-item');
let coinsEarned = 0; // –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –º–æ–Ω–µ—Ç—ã –∑–∞ —Ç–µ–∫—É—â—É—é –∏–≥—Ä—É

let gap = GAP_EASY; // –ù–∞—á–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ

let bird = {
    x: 50,
    y: 150,
    width: 40,
    height: 30,
    gravity: 0.2,
    lift: -5,
    velocity: 0,
    angle: 0, // –£–≥–æ–ª –Ω–∞–∫–ª–æ–Ω–∞ –ø—Ç–∏—á–∫–∏
    rotationSpeed: 0.1 // –°–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è
};
    let pipes = [];
    let score = 0;
    let highScore = 0;
    let isGameOver = false;
    let isPaused = false;

    const birdImages = [];
for (let i = 0; i < 12; i++) {
    const img = new Image();
    img.src = `bird${i}.png`;
    birdImages.push(img);
}

    const backgroundImage = new Image();
    backgroundImage.src = 'background.png';

    function drawBackground() {
        ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);
    }

    function addPipe() {
    const topPipeHeight = Math.floor(Math.random() * (canvas.height - gap - 50)); 
    pipes.push({
        top: { x: canvas.width, y: 0, width: PIPE_WIDTH, height: topPipeHeight },
        bottom: { x: canvas.width, y: topPipeHeight + gap, width: PIPE_WIDTH, height: canvas.height - topPipeHeight - gap }
    });
}

function drawBird() {
    ctx.save(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ canvas
    ctx.translate(bird.x + bird.width / 2, bird.y + bird.height / 2); // –ü–µ—Ä–µ–º–µ—â–∞–µ–º —Ü–µ–Ω—Ç—Ä –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è
    ctx.rotate(bird.angle); // –í—Ä–∞—â–∞–µ–º canvas –ø–æ —É–≥–ª—É –ø—Ç–∏—á–∫–∏

    ctx.drawImage(birdImages[selectedBirdIndex], -bird.width / 2, -bird.height / 2, bird.width, bird.height); // –†–∏—Å—É–µ–º –ø—Ç–∏—á–∫—É
    ctx.restore(); // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º canvas
}

    const TIP_WIDTH = 40; // –®–∏—Ä–∏–Ω–∞ –Ω–∞–∫–æ–Ω–µ—á–Ω–∏–∫–æ–≤
    const RADIUS = 5; // –†–∞–¥–∏—É—Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–∏—è

    function drawPipes() {
        pipes.forEach(pipe => {
            ctx.fillStyle = 'green';
            ctx.fillRect(pipe.top.x, pipe.top.y, PIPE_WIDTH, pipe.top.height);
            ctx.strokeStyle = 'black';
            ctx.strokeRect(pipe.top.x, pipe.top.y, PIPE_WIDTH, pipe.top.height);
            ctx.fillStyle = 'green';
            drawRoundedRect(pipe.top.x + (PIPE_WIDTH - TIP_WIDTH) / 2, pipe.top.y + pipe.top.height - 20, TIP_WIDTH, 20, RADIUS);
            ctx.fillRect(pipe.bottom.x, pipe.bottom.y, PIPE_WIDTH, pipe.bottom.height);
            ctx.strokeRect(pipe.bottom.x, pipe.bottom.y, PIPE_WIDTH, pipe.bottom.height);
            ctx.fillStyle = 'green';
            drawRoundedRect(pipe.bottom.x + (PIPE_WIDTH - TIP_WIDTH) / 2, pipe.bottom.y, TIP_WIDTH, 20, RADIUS);
        });
    }

    function drawRoundedRect(x, y, width, height, radius) {
        ctx.fillStyle = 'green';
        ctx.strokeStyle = 'black';
        ctx.lineWidth = 2;

        ctx.beginPath();
        ctx.moveTo(x + radius, y);
        ctx.lineTo(x + width - radius, y);
        ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
        ctx.lineTo(x + width, y + height - radius);
        ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
        ctx.lineTo(x + radius, y + height);
        ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
        ctx.lineTo(x, y + radius);
        ctx.quadraticCurveTo(x, y, x + radius, y);
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
    }

        function update() {
            if (isPaused) return;

            bird.velocity += bird.gravity;
            bird.y += bird.velocity;

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É–≥–æ–ª –ø—Ç–∏—á–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –µ–µ –¥–≤–∏–∂–µ–Ω–∏—è
            bird.angle = Math.min(Math.max(bird.velocity / 10, -Math.PI / 4), Math.PI / 2); // –£–≥–æ–ª –Ω–∞–∫–ª–æ–Ω–∞

            if (bird.y + bird.height >= canvas.height) {
                bird.y = canvas.height - bird.height;
                endGame();
            }

            pipes.forEach(pipe => {
                pipe.top.x -= pipeSpeed; // –ò—Å–ø–æ–ª—å–∑—É–µ–º pipeSpeed
                pipe.bottom.x -= pipeSpeed; // –ò—Å–ø–æ–ª—å–∑—É–µ–º pipeSpeed

                if (pipe.top.x + pipe.top.width < 0) {
                    pipes.shift();
                    score++;
                    updateCoins(); // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –º–æ–Ω–µ—Ç
                }

                if (
                    bird.x < pipe.top.x + pipe.top.width &&
                    bird.x + bird.width > pipe.top.x &&
                    (bird.y < pipe.top.height || bird.y + bird.height > pipe.bottom.y)
                ) {
                    endGame();
                }
            });

            if (pipes.length === 0 || pipes[pipes.length - 1].top.x < canvas.width - 250) {
                addPipe();
            }
        }

        function endGame() {
            isGameOver = true;
            totalCoins += coinsEarned; // –î–æ–±–∞–≤–ª—è–µ–º –∫ –æ–±—â–µ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –º–æ–Ω–µ—Ç
            if (score > highScore) {
                highScore = score;
            }
            document.getElementById('scoreDisplay').innerText = score;
            document.getElementById('highScoreDisplay').innerText = highScore;
            document.getElementById('coinsDisplay').innerText = `+${coinsEarned} üí∞`; // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –º–æ–Ω–µ—Ç
            document.getElementById('gameOverPanel').style.display = 'block'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBackground();
            drawBird();
            drawPipes();
            ctx.fillStyle = 'white';
            ctx.font = '20px Arial';
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 2;
            ctx.strokeText(`–°—á–µ—Ç: ${score}`, 10, 25);
            ctx.fillText(`–°—á–µ—Ç: ${score}`, 10, 25);
            
            if (isPaused) {
                document.getElementById('pauseText').style.display = 'block';
            } else {
                document.getElementById('pauseText').style.display = 'none';
            }
        }

        function updateCoins() {
    if (isGameOver) return;

    if (score % levelCoinThreshold() === 0 && score > 0) {
        coinsEarned++;
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–Ω–µ—Ç –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
        updateCoinDisplay();
    }
}  

        function levelCoinThreshold() {
            switch (pipeSpeed) {
                case SPEED_EASY:
                    return 15; // –ü—Ä–æ–π–¥–µ–Ω–Ω—ã–µ —Ç—Ä—É–±—ã –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è
                case SPEED_MEDIUM:
                    return 10; // –ü—Ä–æ–π–¥–µ–Ω–Ω—ã–µ —Ç—Ä—É–±—ã –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è
                case SPEED_HARD:
                    return 5;  // –ü—Ä–æ–π–¥–µ–Ω–Ω—ã–µ —Ç—Ä—É–±—ã –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
                default:
                    return 15; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
            }
        }

        function updateCoinDisplay() {
        document.getElementById('coinDisplay').innerText = `${totalCoins} üí∞`;
    }

    shopItems.forEach(item => {
        item.addEventListener('click', () => {
            const index = parseInt(item.getAttribute('data-index'));
            const cost = parseInt(item.getAttribute('data-cost'));

            if (index === selectedBirdIndex) {
                return; // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∫–ª–∏–∫ –Ω–∞ —É–∂–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø—Ç–∏—á–∫–µ
            }

            if (item.querySelector('img').src.includes('question.png')) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –º–æ–Ω–µ—Ç –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è
                if (totalCoins >= cost) {
                    totalCoins -= cost; // –£–º–µ–Ω—å—à–∞–µ–º –º–æ–Ω–µ—Ç—ã
                    item.querySelector('img').src = `bird${index}.png`; // –ú–µ–Ω—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ç–∏—á–∫–∏ (–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
                    item.querySelector('p').innerText = '–í—ã–±—Ä–∞—Ç—å'; // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç
                    updateCoinDisplay(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–æ–Ω–µ—Ç

                    // –£–¥–∞–ª—è–µ–º —Ç–µ–∫—Å—Ç –æ —Ü–µ–Ω–µ, –∫–æ–≥–¥–∞ —è—á–µ–π–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∞
                    item.removeAttribute('data-cost');
                }
            } else {
                // –°–º–µ–Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø—Ç–∏—á–∫–∏
                setSelectedBird(index);
            }
        });
    });

     // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø—Ç–∏—á–∫–∏
     function setSelectedBird(index) {
        shopItems[selectedBirdIndex].querySelector('p').innerText = '–í—ã–±—Ä–∞—Ç—å'; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ä–æ–π –ø—Ç–∏—á–∫–∏
        selectedBirdIndex = index; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å
        shopItems[selectedBirdIndex].querySelector('p').innerText = '‚úî'; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–∞–ª–æ—á–∫—É –ø–æ–¥ –Ω–æ–≤–æ–π –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø—Ç–∏—á–∫–æ–π
    }

    // –ü—Ä–∏–º–µ—Ä –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–æ–Ω–µ—Ç (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à—É –ª–æ–≥–∏–∫—É –∑–¥–µ—Å—å)
    function earnCoins(amount) {
        totalCoins += amount;
        updateCoinDisplay();
    }

    function gameLoop() {
        if (!isGameOver) {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }
    }

    document.addEventListener('keydown', (event) => {
        if (event.key === 'p') {
            isPaused = !isPaused;
            if (!isPaused && !isGameOver) {
                gameLoop();
            }
        }
        if (!isGameOver && !isPaused && event.key === ' ') { 
            bird.velocity = bird.lift; 
        }
    });

    document.getElementById('easyBtn').addEventListener('click', () => {
    startGame(SPEED_EASY);
});
document.getElementById('mediumBtn').addEventListener('click', () => {
    startGame(SPEED_MEDIUM);
});
document.getElementById('hardBtn').addEventListener('click', () => {
    startGame(SPEED_HARD);
});

function startGame(speed) {
    resetGame();
    pipeSpeed = speed;

    switch (speed) {
        case SPEED_EASY:
            gap = GAP_EASY;
            break;
        case SPEED_MEDIUM:
            gap = GAP_MEDIUM;
            break;
        case SPEED_HARD:
            gap = GAP_HARD;
            break;
    }

    updateCoinDisplay(); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–Ω–µ—Ç –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏–≥—Ä—ã
    document.getElementById('mainMenu').style.display = 'none';
    gameLoop();
}

function resetGame() {
    pipes = [];
    score = 0;
    bird.y = 150;
    bird.velocity = 0;
    bird.angle = 0;
    isGameOver = false;
    isPaused = false;
    coinsEarned = 0; // –°–±—Ä–æ—Å –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –º–æ–Ω–µ—Ç
    document.getElementById('gameOverPanel').style.display = 'none';
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBackground();
    document.getElementById('pauseText').style.display = 'none';
    updateCoinDisplay(); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–Ω–µ—Ç –ø—Ä–∏ —Å–±—Ä–æ—Å–µ –∏–≥—Ä—ã
}


    document.getElementById('mainMenu').style.display = 'block'; // –°–¥–µ–ª–∞—Ç—å –º–µ–Ω—é –≤–∏–¥–∏–º—ã–º

    document.getElementById('menuBtn').addEventListener('click', () => {
    resetGame(); // –°–±—Ä–æ—Å–∏—Ç—å –∏–≥—Ä—É
    document.getElementById('gameOverPanel').style.display = 'none'; // –°–∫—Ä—ã—Ç—å —Ç–∞–±–ª–æ "–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞"
    document.getElementById('mainMenu').style.display = 'block'; // –ü–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
});
document.getElementById('restartBtn').addEventListener('click', () => {
    resetGame(); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–≥—Ä—É
    document.getElementById('gameOverPanel').style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º —Ç–∞–±–ª–æ "–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞"
    gameLoop(); // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
});

document.getElementById('shopBtn').addEventListener('click', () => {
    document.getElementById('mainMenu').style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    document.getElementById('shopPanel').style.display = 'block'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–∞–≥–∞–∑–∏–Ω
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ó–∞–∫—Ä—ã—Ç—å" –≤ –æ–∫–Ω–µ –º–∞–≥–∞–∑–∏–Ω–∞
document.getElementById('closeShopBtn').addEventListener('click', () => {
    document.getElementById('shopPanel').style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º –º–∞–≥–∞–∑–∏–Ω
    document.getElementById('mainMenu').style.display = 'block'; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
});

document.addEventListener('keydown', (event) => {
    if (event.key === 'p') {
        isPaused = !isPaused;
        if (!isPaused && !isGameOver) {
            gameLoop();
        }
    }
    if (!isGameOver && !isPaused && (event.key === ' ' || event.key === 'ArrowUp')) { 
        bird.velocity = bird.lift; 
    }
});

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–µ–Ω—Å–æ—Ä–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
document.addEventListener('touchstart', (event) => {
    event.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –µ—Å–ª–∏ —ç—Ç–æ –Ω—É–∂–Ω–æ
    if (!isGameOver && !isPaused) { 
        bird.velocity = bird.lift; 
    }
});

// –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏–º –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å 100 –º–æ–Ω–µ—Ç
document.getElementById('earnButton').addEventListener('click', () => {
        earnCoins(100);
    });

</script>